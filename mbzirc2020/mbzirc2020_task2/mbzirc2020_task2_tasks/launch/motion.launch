<launch>
  <arg name="object_pos_recognition" default="true"/>
  <arg name="skip_takeoff" default="false"/>
  <arg name="smach_viewer" default="true"/>
  <arg name="outdoor" default="true"/>

  <node name="task2_motion" type="task2_motion.py" pkg="mbzirc2020_task2_tasks"
        output="screen">
    <param name="skip_takeoff" value="$(arg skip_takeoff)"/>
    <rosparam command="load" file="$(find mbzirc2020_task2_tasks)/config/Motion.yaml"/>
  </node>

  <group if="$(arg object_pos_recognition)">
    <include file="$(find mbzirc2020_task2_tasks)/launch/recognition.launch">
      <arg if="$(arg outdoor)" name="external_manager" value="true" />
      <arg if="$(arg outdoor)" name="manager" value="/rs_d435/realsense2_camera_manager" />
    </include>
  </group>

  <group unless="$(arg object_pos_recognition)">
    <node name="dummy_object_tf_publisher"
          type="dummy_object_tf_publisher.py"
       pkg="mbzirc2020_task2_tasks">
    <rosparam command="load" file="$(find mbzirc2020_task2_tasks)/config/Motion.yaml"/>
    </node>
  </group>


  <group unless="$(arg outdoor)">
    <node if="$(arg smach_viewer)"
          name="smach_viewer" type="smach_viewer.py" pkg="smach_viewer"/>
  </group>
</launch>
