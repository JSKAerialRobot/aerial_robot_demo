<launch>
  <arg name="gui" default="false" />
  <arg name="manager" default="rs_d435/realsense2_camera_manager"/>
  <arg name="robot_ns" default="hydrus"/>
  <arg name="point_cloud_topic" default="rs_d435/depth_registered/points"/>

  <group ns="$(arg robot_ns)">

    <node pkg="nodelet" type="nodelet" name="voxel_grid" args="load pcl/VoxelGrid $(arg manager)">
      <remap from="~input" to="$(arg point_cloud_topic)" />
      <rosparam>
        filter_field_name: z
        filter_limit_min: 0.01
        filter_limit_max: 20.0
        filter_limit_negative: False
        leaf_size: 0.015
      </rosparam>
    </node>

    <node pkg="nodelet" type="nodelet"
          name="multi_plane_sac_segmentation"
          args="load jsk_pcl/MultiPlaneSACSegmentation $(arg manager)">
      <remap from="~input" to="voxel_grid/output"/>
      <rosparam>
        use_normal: false
        use_clusters: false
        use_imu_parallel: false
        use_imu_perpendicular: false
        max_iterations: 100
        min_trial: 2
        min_points: 1000
        min_inliers: 500
      </rosparam>
    </node>

  </group>

</launch>
